import math
import time
from web3 import Web3
from rpc import Rpc
import concurrent.futures

web3 = Web3(Web3.HTTPProvider('https://goerli.infura.io/v3/'))

if __name__ == '__main__':
    COIN_DECIMALS = math.pow(10, 18) # 主币精度
    rpc = Rpc('https://goerli.infura.io/v3/', chainid=5)

    with open("privkey.txt", "r") as f:
        privkeys = f.readlines()

    with open("addr_4.txt", "r") as f:
        addr_4s = f.readlines()

    def send_transaction(privkey, addr_4):
        account = web3.eth.account.from_key(privkey.strip())
        amount = int(0.010053162085713949 * COIN_DECIMALS)
        uint_0 = hex(amount)[2:].rjust(64, '0')
        method = '0x8ca3bf68' # 存款方法hash值
        uint_1 = '0000000000000000000000000000000000000000000000000000000000000000'
        uint_2 = '000000000000000000000000000000000000000000000000002386f26fc10000'
        uint_3 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_4 = '0000000000000000000000000000000000000000000000000000000000000140'
        uint_5 = '0000000000000000000000000000000000000000000000000000000000000180'
        uint_6 = '00000000000000000000000000000000000000000000000000000000000003a0'
        addr_7 = addr_4.strip().rjust(64, '0')
        uint_8 = '0000000000000000000000000000000000000000000000000000000000000001'
        uint_9 = '0000000000000000000000000000000000000000000000000000000000000005'
        uint_10 = '6c696e6561000000000000000000000000000000000000000000000000000000'
        uint_11 = '0000000000000000000000000000000000000000000000000000000000000005'
        uint_12 = '6155534443000000000000000000000000000000000000000000000000000000'
        uint_13 = '0000000000000000000000000000000000000000000000000000000000000001'
        uint_14 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_15 = '0000000000000000000000000000000000000000000000000000000000000002'
        addr_16 = '00000000000000000000000068b3465833fb72a70ecdf485e0e4c7bd8665fc45'
        uint_17 = '0000000000000000000000000000000000000000000000000000000000000000'
        uint_18 = '00000000000000000000000000000000000000000000000000000000000000a0'
        uint_19 = '00000000000000000000000000000000000000000000000000000000000000c0'
        uint_20 = '0000000000000000000000000000000000000000000000000000000000000134'
        uint_21 = '00000000000000000000000000000000000000000000000000000000000000c0'
        uint_22 = '00000000000000000000000000000000000000000000000000000000000000f8'
        uint_23 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_24 = '00000000000000000000000000000000000000000000000000000000000000f8'
        uint_25 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_26 = '0000000000000000000000000000000000000000000000000000000000000004'
        uint_27 = '0000000000000000000000000000000000000000000000000000000000000040'
        uint_28 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_29 = '00000000000000000000000000000000000000000000000000000000000000d8'
        uint_30 = '0000000000000000000000000000000000000000000000000000000000000002'
        uint_31 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_32 = '0000000000000000000000000000000000000000000000000000000000000018'
        uint_33 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_34 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_35 = '0000000000000000000000000000000000000000000000000000000000000038'
        uint_36 = '0000000000000000000000000000000000000000000000000000000000000001'
        uint_37 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_38 = '0000000000000000000000000000000000000000000000000000000000000038'
        uint_39 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_40 = '0000000000000000000000000000000000000000000000000000000000000048'
        uint_41 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_42 = '0000000000000000000000000000000000000000000000000000000000000048'
        uint_43 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_44 = '0000000000000000000000000000000000000000000000000000000000000048'
        addr_45 = '0000000000000000000000000000000000000000000000000000000000000048'
        uint_46 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_47 = '0000000000000000000000000000000000000000000000000000000000000068'
        uint_48 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_49 = '00000000000000000000000000000000000000000000000000000000000000a0'
        uint_50 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_51 = '00000000000000000000000000000000000000000000000000000000000000c0'
        uint_52 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_53 = '00000000000000000000000000000000000000000000000000000000000000c0'
        uint_54 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_55 = '00000000000000000000000000000000000000000000000000000000000000c0'
        addr_56 = '00000000000000000000000000000000000000000000000000000000000000c0'
        uint_57 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_58 = '00000000000000000000000000000000000000000000000000000000000000c0'
        addr_59 = '00000000000000000000000000000000000000000000000000000000000000c0'
        uint_60 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_61 = '00000000000000000000000000000000000000000000000000000000000000e0'
        uint_62 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_63 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_64 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_65 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_66 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_67 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_68 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_69 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_70 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_71 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_72 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_73 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_74 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_75 = '0000000000000000000000000000000000000000000000000000000000000100'
        addr_76 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_77 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_78 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_79 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_80 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_81 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_82 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_83 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_84 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_85 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_86 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_87 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_88 = '0000000000000000000000000000000000000000000000000000000000000100'
        uint_89 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_90 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_91 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_92 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_93 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_94 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_95 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_96 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_97 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_98 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_99 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_100 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_101 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_102 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_103 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_104 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_105 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_106 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_107 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_108 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_109 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_110 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_111 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_112 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_113 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_114 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_115 = '0000000000000000000000000000000000000000000000000000000000000020'
        addr_116 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_117 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_118 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_119 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_120 = '0000000000000000000000000000000000000000000000000000000000000020'
        uint_121 = '0000000000000000000000000000000000000000000000000000000000000020'

        data = method + uint_1 + uint_2 + uint_3 + uint_4 + uint_5 + uint_6 + addr_7 + uint_8 + uint_9 + uint_10 + uint_11 + uint_12 + uint_13 + uint_14 + uint_15 + addr_16 + uint_17 + uint_18 + uint_19 + uint_20 + uint_21 + uint_22 + uint_23 + uint_24 + uint_25 + uint_26 + uint_27 + uint_28 + uint_29 + uint_30 + uint_31 + uint_32 + uint_33 + uint_34 + uint_35 + uint_36 + uint_37 + uint_38 + uint_39 + uint_40 + uint_41 + uint_42 + uint_43 + uint_44 + addr_45 + uint_46 + addr_47 + uint_48 + uint_49 + uint_50 + uint_51 + uint_52 + uint_53 + uint_54 + uint_55 + addr_56 + uint_57 + uint_58 + addr_59 + uint_60 + uint_61 + uint_62 + uint_63 + uint_64 + uint_65 + uint_66 + uint_67 + uint_68 + uint_69 + uint_70 + uint_71 + uint_72 + addr_73 + uint_74 + uint_75 + addr_76 + uint_77 + uint_78 + uint_79 + uint_80 + uint_81 + uint_82 + uint_83 + uint_84 + uint_85 + addr_86 + uint_87 + addr_88 + uint_89 + uint_90 + uint_91 + uint_92 + uint_93 + uint_94 + uint_95 + uint_96 + uint_97 + uint_98 + uint_99 + uint_100 + uint_101 + addr_102 + uint_103 + uint_104 + addr_105 + uint_106 + uint_107 + uint_108 + uint_109 + uint_110 + uint_111 + uint_112 + addr_113 + uint_114 + uint_115 + addr_116 + uint_117 + uint_118 + uint_119 + uint_120 + uint_121

        data = data.lower()

        gaslimit = 410000
        gasPrice = web3.toWei('3', 'gwei') # 设置gasprice的值，单位为Gwei
        to = '0x9bEb991eDdF92528E6342Ec5f7B0846C24cbaB58' # linea存款的合约地址
        to = web3.toChecksumAddress(to)
        res = rpc.transfer(account, to, amount, gaslimit, gasPrice=gasPrice, data=data)
        print(res)

    with concurrent.futures.ThreadPoolExecutor() as executor:
        executor.map(send_transaction, privkeys, addr_4s)

